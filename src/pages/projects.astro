---
import {type ProjectItem, projects} from "@/content/config/project.config.ts";
import {i18n} from "@i18n/translation.ts";
import I18nKey from "@i18n/i18nKey.ts";
import MainGridLayout from "@layouts/MainGridLayout.astro";
const openSourceProjects: ProjectItem[] = projects.filter(p => p.type === "opensource");
const novelProjects: ProjectItem[] = projects.filter(p => p.type === "novel");
---
<MainGridLayout title={i18n(I18nKey.about)} description={i18n(I18nKey.about)}>
    <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
        <div class="card-base z-10 px-9 py-6 relative w-full ">
            <section class="projects-section">
                <!-- 开源项目 -->
                <div class="projects-group">
                    <h2>开源项目</h2>
                    <div class="projects-grid">
                        {openSourceProjects.map(project => (
                                <article class="project-card">
                                    {project.cover && <img src={project.cover} alt={project.title} class="cover" loading="lazy" />}
                                    <div class="info">
                                        <div class="title-status">
                                            <h3>{project.title}</h3>
                                            {project.status && <span class={`status ${project.status}`}>{project.status}</span>}
                                        </div>
                                        <p class="desc">{project.description}</p>
                                        {project.tags && (
                                                <ul class="tags">
                                                    {project.tags.map(tag => <li>{tag}</li>)}
                                                </ul>
                                        )}
                                        <footer>
                                            {project.url && (
                                                    <a href={project.url} target="_blank" class="btn"  target="_blank">查看详情 →</a>
                                            )}
                                        </footer>
                                    </div>
                                </article>
                        ))}
                    </div>
                </div>

                <!-- 小说项目 -->
                <div class="projects-group">
                    <h2>小说项目</h2>
                    <div class="projects-grid">
                        {novelProjects.map(project => (
                                <article class="project-card novel">
                                    {project.cover && <img src={project.cover} alt={project.title} class="cover" loading="lazy" />}
                                    <div class="info">
                                        <div class="title-status">
                                            <h3>{project.title}</h3>
                                            {project.status && <span class={`status ${project.status}`}>{project.status}</span>}
                                        </div>
                                        <p class="desc">{project.description}</p>
                                        {project.tags && (
                                                <ul class="tags">
                                                    {project.tags.map(tag => <li>{tag}</li>)}
                                                </ul>
                                        )}
                                        <footer>
                                            {project.url && (
                                                    <a href={project.url} class="btn" target="_blank">查看详情 →</a>
                                            )}
                                        </footer>
                                    </div>
                                </article>
                        ))}
                    </div>
                </div>
            </section>
        </div>
    </div>
</MainGridLayout>


<style>
    .projects-section {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .projects-group h2 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    /* 网格布局 */
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 1rem;
    }

    /* 卡片样式 */
    .project-card {
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        background: #f8fafc;
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
    }

    .project-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.12);
    }

    /* 封面图片 */
    .cover {
        width: 100%;
        height: 140px;
        object-fit: cover;
        display: block;
    }

    /* 项目信息 */
    .info {
        padding: 0.8rem 1rem;
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    /* 标题 + 状态靠右 */
    .title-status {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .info h3 {
        margin: 0;
        font-size: 1.1rem;
    }

    .desc {
        margin: 0.5rem 0;
        font-size: 0.9rem;
        color: #555;
    }

    /* 标签，默认隐藏，hover 显示 */
    .tags {
        display: flex;
        gap: 6px;
        padding: 0;
        list-style: none;
        margin: 0.5rem 0;
        opacity: 0;
        transition: opacity 0.2s;
    }

    .project-card:hover .tags {
        opacity: 1;
    }

    .tags li {
        font-size: 12px;
        background: #eee;
        padding: 2px 6px;
        border-radius: 4px;
    }

    /* 按钮 */
    .btn {
        color: #007acc;
        text-decoration: none;
        font-size: 0.9rem;
    }

    .btn:hover {
        text-decoration: underline;
    }

    /* 状态 */
    .status {
        font-size: 0.8rem;
        padding: 2px 6px;
        border-radius: 4px;
    }

    .status.active {
        color: green;
    }
    .status.paused {
        color: orange;
    }
    .status.finished {
        color: gray;
    }

    /* 小说卡片背景 */
    .project-card.novel {
        background: #fff7ed;
    }
</style>