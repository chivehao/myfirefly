async function x(t){if(!t||!t.length)return[];let e=[];for(const n of t){const o=await S(n);e.push(...o),console.debug("feed",o,"url",n)}return e}async function S(t){const e=await fetch(t);if(!e.ok)throw new Error("RSS 获取失败");const n=await e.text(),i=new DOMParser().parseFromString(n,"application/xml");return Array.from(i.querySelectorAll("item")).map(r=>{const s=r.querySelector("title")?.textContent?.trim()??"",c=r.querySelector("link")?.textContent?.trim()??"",a=r.querySelector("description")?.textContent?.trim()??"",l=r.querySelector("content\\:encoded")?.textContent?.trim(),u=r.querySelector("pubDate")?.textContent?.trim()??new Date().toISOString();let p=new Date(u).toISOString();return{title:s,link:c,description:a,contentSnippet:l,isoDate:p,authorName:s||"未知来源",sourceUrl:c||t}})}export{S as parseRssWithUrl,x as parseRssWithUrls};
