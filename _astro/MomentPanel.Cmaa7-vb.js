const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.3nyidrkG.js","_astro/expressiveCodeConfig.C9aXunRx.js","_astro/navBarConfig.HW1bbUgS.js"])))=>i.map(i=>d[i]);
import{_ as nt}from"./preload-helper.BlTxHScW.js";import{p as pt,o as ht,i as xt,s as V}from"./props.Cmhl5VEf.js";import{ab as wt,C as mt,z as W,D as _t,ac as dt,H as bt,I as gt,G as yt,J as st,a4 as Dt,Q as it,U as vt,m as lt,ad as kt,ae as Et,af as It,ag as St,ah as Ft,ai as Nt,f as A,t as z,b as _,p as Pt,c as Rt,u as i,h as b,s as Ct,i as r,r as s,d as u,j as ut,a as ct,g as t}from"./utils.M39LXBQt.js";import{s as v}from"./render.BH3stDEr.js";import{B as At}from"./branches.CICCjMYW.js";import{e as Y,i as q}from"./each.C4ufmE07.js";import{I as p}from"./zh_TW.DWGmHZy3.js";import{i as g}from"./translation.BsfFJW_D.js";import{I as Bt}from"./Icon.Nq670chz.js";import"./navBarConfig.HW1bbUgS.js";import"./if.CsEVgM2h.js";const ft=0,ot=1;function Tt(M,L,B,x,C){W&&_t();var O=wt(),y=Nt,w=O?vt(y):lt(y,!1,!1),D=O?vt(y):lt(y,!1,!1),h=new At(M);mt(()=>{var m=L(),G=!1;let T=W&&dt(m)===(M.data===bt);if(T&&(gt(yt()),st(!1)),dt(m)){var J=kt(),H=!1;const k=o=>{if(!G){H=!0,J(!1),Et.ensure(),W&&st(!1);try{o()}finally{It(),St||Ft()}}};m.then(o=>{k(()=>{it(w,o),h.ensure(ot,x&&(n=>x(n,w)))})},o=>{k(()=>{if(it(D,o),h.ensure(ot,C&&(n=>C(n,D))),!C)throw D.v})}),W?h.ensure(ft,B):Dt(()=>{H||k(()=>{h.ensure(ft,B)})})}else it(w,m),h.ensure(ot,x&&(k=>x(k,w)));return T&&st(!0),()=>{G=!0}})}var $t=A(`<a target="_blank" class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div> <div class="w-[70%] md:max-w-[60%] md:w-[50%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),Ut=A(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"><div class="text-left"><strong>博文作者</strong></div></div> <div class="w-[60%] md:w-[70%] transition text-left text-50"> </div></div> <!></div>`),jt=A(`<a target="_blank" class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div> <div class="w-[70%] md:max-w-[60%] md:w-[50%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),zt=A(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"><div class="text-left"><strong>博文作者</strong></div></div> <div class="w-[60%] md:w-[70%] transition text-left text-50"> </div></div> <!></div>`),Mt=A("<p>加载数据中...</p>"),Lt=A('<div class="card-base px-8 py-6"><div class="mb-4"><div class="flex items-center gap-3 mb-3"><div class="h-8 w-8 rounded-lg bg-[var(--primary)] flex items-center justify-center text-white dark:text-black/70"><!></div> <h1 class="text-3xl font-bold text-neutral-900 dark:text-neutral-100"> </h1></div> </div> <!></div>');function Xt(M,L){Rt(L,!1);let B=pt(L,"sortedPosts",28,()=>[]),x=lt([]);function C(o){const n=(o.getMonth()+1).toString().padStart(2,"0"),c=o.getDate().toString().padStart(2,"0");return`${n}-${c}`}async function O(){const{getEnabledFriends:o}=await nt(async()=>{const{getEnabledFriends:e}=await import("./index.3nyidrkG.js");return{getEnabledFriends:e}},__vite__mapDeps([0,1,2])),{parseRssWithUrls:n}=await nt(async()=>{const{parseRssWithUrls:e}=await import("./get-feeds-client-utils.CZz3LdGc.js");return{parseRssWithUrls:e}},[]),l=o().filter(e=>e&&e.enabled&&e.subInMoments&&e.rssUrl).map(({rssUrl:e})=>e),d=await n(l).catch(e=>(console.warn("拉取最新RSS数据失败，使用上次编译时的RSS数据。",e),[]));d&&d.length>0&&(B(d),await y(),console.debug("已经拉取到最新的RSS数据。"))}async function y(){let o=B();o=o.slice().sort((l,d)=>Date.parse(d.isoDate)-Date.parse(l.isoDate));const n=o.reduce((l,d)=>{const e=new Date(Date.parse(d.isoDate)).getFullYear();return l[e]||(l[e]=[]),l[e].push(d),l},{}),c=Object.keys(n).map(l=>({year:Number.parseInt(l,10),moments:n[Number.parseInt(l,10)]}));c.sort((l,d)=>d.year-l.year),Ct(x,c)}ht(y),xt();var w=Lt(),D=r(w),h=r(D),m=r(h),G=r(m);Bt(G,{icon:"material-symbols:group",class:"text-[1.5rem]"}),s(m);var T=u(m,2),J=r(T,!0);s(T),s(h);var H=u(h);s(D);var k=u(D,2);Tt(k,()=>i(O),o=>{var n=Mt();_(o,n)},(o,n)=>{var c=ut(),l=ct(c);Y(l,1,()=>t(x),q,(d,e)=>{var E=Ut(),I=r(E),S=r(I),K=r(S,!0);s(S);var $=u(S,6),Q=r($);s($),s(I);var Z=u(I,2);Y(Z,1,()=>(t(e),i(()=>t(e).moments)),q,(F,a)=>{var f=$t(),U=r(f),N=r(U),X=r(N,!0);s(N);var P=u(N,4),tt=r(P);s(P);var R=u(P,2),et=r(R,!0);s(R);var j=u(R,2),at=r(j,!0);s(j),s(U),s(f),z(rt=>{V(f,"href",(t(a),i(()=>t(a).link))),V(f,"aria-label",(t(a),i(()=>t(a).isoDate))),v(X,rt),v(tt,`[${t(a),i(()=>t(a).authorName)??""}]`),v(et,(t(a),i(()=>t(a).title))),v(at,(t(a),i(()=>t(a).description)))},[()=>(t(a),i(()=>C(new Date(Date.parse(t(a).isoDate)))))]),_(F,f)}),s(E),z(F=>{v(K,(t(e),i(()=>t(e).year))),v(Q,`${t(e),i(()=>t(e).moments.length)??""} ${F??""}`)},[()=>(b(g),t(e),b(p),i(()=>g(t(e).moments.length===1?p.postCount:p.postsCount)))]),_(d,E)}),_(o,c)},(o,n)=>{var c=ut(),l=ct(c);Y(l,1,()=>t(x),q,(d,e)=>{var E=zt(),I=r(E),S=r(I),K=r(S,!0);s(S);var $=u(S,6),Q=r($);s($),s(I);var Z=u(I,2);Y(Z,1,()=>(t(e),i(()=>t(e).moments)),q,(F,a)=>{var f=jt(),U=r(f),N=r(U),X=r(N,!0);s(N);var P=u(N,4),tt=r(P);s(P);var R=u(P,2),et=r(R,!0);s(R);var j=u(R,2),at=r(j,!0);s(j),s(U),s(f),z(rt=>{V(f,"href",(t(a),i(()=>t(a).link))),V(f,"aria-label",(t(a),i(()=>t(a).isoDate))),v(X,rt),v(tt,`[${t(a),i(()=>t(a).authorName)??""}]`),v(et,(t(a),i(()=>t(a).title))),v(at,(t(a),i(()=>t(a).description)))},[()=>(t(a),i(()=>C(new Date(Date.parse(t(a).isoDate)))))]),_(F,f)}),s(E),z(F=>{v(K,(t(e),i(()=>t(e).year))),v(Q,`${t(e),i(()=>t(e).moments.length)??""} ${F??""}`)},[()=>(b(g),t(e),b(p),i(()=>g(t(e).moments.length===1?p.postCount:p.postsCount)))]),_(d,E)}),_(o,c)}),s(w),z((o,n)=>{v(J,o),v(H,` ${n??""}`)},[()=>(b(g),b(p),i(()=>g(p.moments))),()=>(b(g),b(p),i(()=>g(p.momentsDescription)))]),_(M,w),Pt()}export{Xt as default};
