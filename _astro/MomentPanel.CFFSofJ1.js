const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.3nyidrkG.js","_astro/expressiveCodeConfig.C9aXunRx.js","_astro/navBarConfig.HW1bbUgS.js"])))=>i.map(i=>d[i]);
import{_ as dt}from"./preload-helper.BlTxHScW.js";import{p as ht,o as wt,i as xt,s as Y}from"./props.Cmhl5VEf.js";import{ab as mt,C as _t,z as q,D as bt,ac as vt,H as gt,I as yt,G as Dt,J as it,a4 as kt,Q as ot,U as ut,m as nt,ad as Et,ae as It,af as St,ag as Ft,ah as Nt,ai as Pt,f as B,t as M,b as x,p as Rt,c as Ct,u as i,h as m,s as At,i as r,r as s,d as v,j as ct,a as ft,g as t}from"./utils.M39LXBQt.js";import{s as d}from"./render.BH3stDEr.js";import{B as Bt}from"./branches.CICCjMYW.js";import{e as J,i as K}from"./each.C4ufmE07.js";import{I as p}from"./zh_TW.DWGmHZy3.js";import{i as _}from"./translation.BsfFJW_D.js";import{I as Tt}from"./Icon.Nq670chz.js";import"./navBarConfig.HW1bbUgS.js";import"./if.CsEVgM2h.js";const pt=0,lt=1;function Ut(O,G,T,U,b){q&&bt();var $=mt(),C=Pt,g=$?ut(C):nt(C,!1,!1),y=$?ut(C):nt(C,!1,!1),h=new Bt(O);_t(()=>{var w=G(),A=!1;let H=q&&vt(w)===(O.data===gt);if(H&&(yt(Dt()),it(!1)),vt(w)){var V=Et(),W=!1;const D=k=>{if(!A){W=!0,V(!1),It.ensure(),q&&it(!1);try{k()}finally{St(),Ft||Nt()}}};w.then(k=>{D(()=>{ot(g,k),h.ensure(lt,U&&(o=>U(o,g)))})},k=>{D(()=>{if(ot(y,k),h.ensure(lt,b&&(o=>b(o,y))),!b)throw y.v})}),q?h.ensure(pt,T):kt(()=>{W||D(()=>{h.ensure(pt,T)})})}else ot(g,w),h.ensure(lt,U&&(D=>U(D,g)));return H&&it(!0),()=>{A=!0}})}var $t=B(`<a target="_blank" class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div> <div class="w-[70%] md:max-w-[60%] md:w-[50%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),zt=B(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"><div class="text-left"><strong>博文作者</strong></div></div> <div class="w-[60%] md:w-[70%] transition text-left text-50"> </div></div> <!></div>`),jt=B(`<a target="_blank" class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div> <div class="w-[70%] md:max-w-[60%] md:w-[50%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),Lt=B(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="hidden md:block md:w-[10%] text-left text-sm transition
                            whitespace-nowrap overflow-ellipsis overflow-hidden text-30"><div class="text-left"><strong>博文作者</strong></div></div> <div class="w-[60%] md:w-[70%] transition text-left text-50"> </div></div> <!></div>`),Mt=B("<p>加载数据中...</p>"),Ot=B('<div class="card-base px-8 py-6"><div class="mb-4"><div class="flex items-center gap-3 mb-3"><div class="h-8 w-8 rounded-lg bg-[var(--primary)] flex items-center justify-center text-white dark:text-black/70"><!></div> <h1 class="text-3xl font-bold text-neutral-900 dark:text-neutral-100"> </h1></div> </div> <!></div>');function te(O,G){Ct(G,!1);let T=ht(G,"sortedPosts",28,()=>[]);new URLSearchParams(window.location.search).get("uncategorized");let b=nt([]);function $(o){const u=(o.getMonth()+1).toString().padStart(2,"0"),c=o.getDate().toString().padStart(2,"0");return`${u}-${c}`}async function C(){const{getEnabledFriends:o}=await dt(async()=>{const{getEnabledFriends:e}=await import("./index.3nyidrkG.js");return{getEnabledFriends:e}},__vite__mapDeps([0,1,2])),{parseRssWithUrls:u}=await dt(async()=>{const{parseRssWithUrls:e}=await import("./get-feeds-client-utils.CZz3LdGc.js");return{parseRssWithUrls:e}},[]),l=o().filter(e=>e&&e.enabled&&e.subInMoments&&e.rssUrl).map(({rssUrl:e})=>e),n=await u(l).catch(e=>(console.warn("拉取最新RSS数据失败，使用上次编译时的RSS数据。",e),[]));n&&n.length>0&&(T(n),await g(),console.debug("已经拉取到最新的RSS数据。"))}async function g(){let o=T();o=o.slice().sort((l,n)=>Date.parse(n.isoDate)-Date.parse(l.isoDate));const u=o.reduce((l,n)=>{const e=new Date(Date.parse(n.isoDate)).getFullYear();return l[e]||(l[e]=[]),l[e].push(n),l},{}),c=Object.keys(u).map(l=>({year:Number.parseInt(l,10),moments:u[Number.parseInt(l,10)]}));c.sort((l,n)=>n.year-l.year),At(b,c)}wt(g),xt();var y=Ot(),h=r(y),w=r(h),A=r(w),H=r(A);Tt(H,{icon:"material-symbols:group",class:"text-[1.5rem]"}),s(A);var V=v(A,2),W=r(V,!0);s(V),s(w);var D=v(w);s(h);var k=v(h,2);Ut(k,()=>i(C),o=>{var u=Mt();x(o,u)},(o,u)=>{var c=ct(),l=ft(c);J(l,1,()=>t(b),K,(n,e)=>{var E=zt(),I=r(E),S=r(I),Q=r(S,!0);s(S);var z=v(S,6),Z=r(z);s(z),s(I);var X=v(I,2);J(X,1,()=>(t(e),i(()=>t(e).moments)),K,(F,a)=>{var f=$t(),j=r(f),N=r(j),tt=r(N,!0);s(N);var P=v(N,4),et=r(P);s(P);var R=v(P,2),at=r(R,!0);s(R);var L=v(R,2),rt=r(L,!0);s(L),s(j),s(f),M(st=>{Y(f,"href",(t(a),i(()=>t(a).link))),Y(f,"aria-label",(t(a),i(()=>t(a).isoDate))),d(tt,st),d(et,`[${t(a),i(()=>t(a).authorName)??""}]`),d(at,(t(a),i(()=>t(a).title))),d(rt,(t(a),i(()=>t(a).description)))},[()=>(t(a),i(()=>$(new Date(Date.parse(t(a).isoDate)))))]),x(F,f)}),s(E),M(F=>{d(Q,(t(e),i(()=>t(e).year))),d(Z,`${t(e),i(()=>t(e).moments.length)??""} ${F??""}`)},[()=>(m(_),t(e),m(p),i(()=>_(t(e).moments.length===1?p.postCount:p.postsCount)))]),x(n,E)}),x(o,c)},(o,u)=>{var c=ct(),l=ft(c);J(l,1,()=>t(b),K,(n,e)=>{var E=Lt(),I=r(E),S=r(I),Q=r(S,!0);s(S);var z=v(S,6),Z=r(z);s(z),s(I);var X=v(I,2);J(X,1,()=>(t(e),i(()=>t(e).moments)),K,(F,a)=>{var f=jt(),j=r(f),N=r(j),tt=r(N,!0);s(N);var P=v(N,4),et=r(P);s(P);var R=v(P,2),at=r(R,!0);s(R);var L=v(R,2),rt=r(L,!0);s(L),s(j),s(f),M(st=>{Y(f,"href",(t(a),i(()=>t(a).link))),Y(f,"aria-label",(t(a),i(()=>t(a).isoDate))),d(tt,st),d(et,`[${t(a),i(()=>t(a).authorName)??""}]`),d(at,(t(a),i(()=>t(a).title))),d(rt,(t(a),i(()=>t(a).description)))},[()=>(t(a),i(()=>$(new Date(Date.parse(t(a).isoDate)))))]),x(F,f)}),s(E),M(F=>{d(Q,(t(e),i(()=>t(e).year))),d(Z,`${t(e),i(()=>t(e).moments.length)??""} ${F??""}`)},[()=>(m(_),t(e),m(p),i(()=>_(t(e).moments.length===1?p.postCount:p.postsCount)))]),x(n,E)}),x(o,c)}),s(y),M((o,u)=>{d(W,o),d(D,` ${u??""}`)},[()=>(m(_),m(p),i(()=>_(p.moments))),()=>(m(_),m(p),i(()=>_(p.momentsDescription)))]),x(O,y),Rt()}export{te as default};
